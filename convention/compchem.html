<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Chemical Markup Language - CompChem Convention</title>
        <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
        <meta http-equiv="refresh" content="30" /> 
        <link rel="stylesheet" href="../style/W3C-PR.css" type="text/css" />
        <link rel="stylesheet" href="../style/cml-spec.css" type="text/css" />
    </head>

    <body>
        <div class="head">
            <h1>Chemical Markup Language - CompChem Convention</h1>
            <h2>08 March 2011</h2>

            <dl>
                <dt>
                    <a id="thisVersion" name="thisVersion">This version</a>:</dt>
                <dd>
                    <a href="http://www.xml-cml.org/convention/compchem-20110308">http://www.xml-cml.org/convention/compchem-20110308</a>
                </dd>

                <dt>Latest version:</dt>
                <dd>
                    <a href="http://www.xml-cml.org/convention/compchem">http://www.xml-cml.org/convention/compchem</a>
                </dd>

                <dt>Authors:</dt>
                <dd>See <a href="#acks">acknowledgments</a>.</dd>

                <dt>Editors:</dt>
                <dd>Weerapong Phadungsukanan, University of Cambridge</dd>
            </dl>

            <h2>
                <a name="abstract" id="abstract"/> Abstract</h2>

            <p>This specification defines the requirements of the Chemical Markup Language CompChem convention.</p>

            <hr />
        </div>

        <h1>
            <a name="contents" id="contents"/>Table of Contents</h1>

        <p>TODO</p>

        <hr />


        <h1>
            <a name="introduction">1.</a> Introduction</h1>

        <p>
            The CompChem convention is used to specify computational chemistry documents. It is 
            intented to capture the typical underlying processes of quantum calculations and their relationships
            in a well defined implicit semantic structure using Chemical Markup Language (CML).
        </p>

        <p>
            This document describes the concepts which are introduced in CompChem, explains how to 
            compose a CompChem document and illustrates it with examples. The core concepts that make up
            CompChem are:
        </p>

        <ul>
            <li><a href="#jobList">Job list</a></li>
            <li><a href="#job">Job</a></li>
            <li><a href="#initialization">Initialization</a></li>
            <li><a href="#calculation">Calculation</a></li>
            <li><a href="#finalization">Finalization</a></li>
            <li><a href="#environment">Environment</a></li>
            <li><a href="#userDefinedConcept">User defined concept</a></li>
        </ul>

        <p>
            The CompChem convention also relies on the <a href="http://www.xml-cml.org/convention/molecular">molecular convention</a>
            or other RECOMMENDED molecular conventions <em class="bad">Make link to recomended conventions in the page</em>
            which defines a set of constraints for storing to representations of molecules in CML. CompChem requires
            that any molecules <i>e.g.</i> in the input molecular geometry and the optimised geometry result conform
            to the molecular convention. The molecular convention is not explained here and the reader should consult
            the <a href="http://www.xml-cml.org/convention/molecular">molecular convention</a> specification for more
            information.
        </p>


        <h2>
            <a name="notational_conventions">1.1</a> Notational Conventions</h2>

        <p>
            The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
            &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot;
            in this document are to be interpreted as described in RFC 2119 [<cite>
                <a href="#ref-RFC2119">IETF RFC 2119</a>
            </cite>].
        </p>

        <p>
            The terms &quot;element&quot;, &quot;attribute&quot;, &quot;child&quot; and &quot;parent&quot;
            in this document are to be interpreted as described in the W3C Recommendation for Extensible Markup
            Language (XML) [<cite>
                <a href="#ref-XML">W3C XML</a>
            </cite>].
        </p>

        <p>The use of fonts is as follows:</p>
        <ul>
            <li>Schema terms, including elements and attributes, are written in <code>this font</code>.</li>
        </ul>

        <h2>
            <a name="namespaces">1.2</a> Namespaces</h2>

        <p>This specification uses the following namespaces and prefixes to indicate those namespaces:</p>

        <table class="namespace-table" summary="Namespaces table">
            <tr>
                <th>Prefix</th>
                <th>Namespace URI</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>
                    <code>cml</code>
                </td>
                <td>
                    <code>http://www.xml-cml.org/schema</code>
                </td>
                <td>Chemical Markup Language elements</td>
            </tr>
            <tr>
                <td>
                    <code>convention</code>
                </td>
                <td>
                    <code>http://www.xml-cml.org/convention/</code>
                </td>
                <td>Standard Chemical Markup Language convention namespace</td>
            </tr>
            <tr>
                <td>
                    <code>compchem</code>
                </td>
                <td>
                    <code>http://www.xml-cml.org/dictionary/compchem/</code>
                </td>
                <td>CompChem Dictionary namespace</td>
            </tr>
            <tr>
                <td>
                    <code>xhtml</code>
                </td>
                <td>
                    <code>http://www.w3.org/1999/xhtml</code>
                </td>
                <td>XHTML</td>
            </tr>
        </table>


        <h1 id="CompChem">
            <a name="applying">2.</a> Applying the CompChem convention on CML module element</h1>

        <p>
            The CompChem convention MUST be specified using the <code>convention</code> attribute
            on a <code>module</code> element and the value MUST be QName that represents CompChem
            convention, i.e. <code>convention:compchem</code>. Such a module will be addressed as
            a CompChem module or a CompChem module element in this convention. The <a href="#example1">
            Example 1</a> shows the namespaces and the convention declarations for the CompChem module. 
        </p>

        <p id="example1">
            <strong>Example 1: Minimal requirements for CompChem module element.</strong>
        </p>
        <div class="good">
            <pre>
&lt;module xmlns="http://www.xml-cml.org/schema"
        xmlns:convention="http://www.xml-cml.org/convention/"
        convention="convention:compchem"&gt;

        &lt;!-- body is omitted. --&gt;

&lt;/module&gt;
            </pre>
        </div>

        <p>
            A CompChem module MUST contain at least one child of a <a href="#jobList">job list module</a>
            element, <em>i.e.</em> <code>&lt;module dictRef="compchem:jobList" id="jobList-0000"&gt;</code>,
            and MUST NOT contain any other child elements in any namespace, see <a href="#example2">Example 2</a>.
        </p>

        <p id="example2">
            <strong>Example 2: CompChem module as root element and contains Joblist modules.</strong>
        </p>
        <div class="good">
            <pre>
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;module xmlns="http://www.xml-cml.org/schema"
        xmlns:compchem="http://www.xml-cml.org/dictionary/compchem/"
        xmlns:convention="http://www.xml-cml.org/convention/"
        convention="convention:compchem"&gt;

    &lt;module dictRef="compchem:jobList" id="jobList-0001"&gt;
        &lt;!-- 1st job list body is omitted. --&gt;
    &lt;/module&gt;

    &lt;module dictRef="compchem:jobList" id="jobList-0002"&gt;
        &lt;!-- 2nd job list body is omitted. --&gt;
    &lt;/module&gt;

&lt;/module&gt;
            </pre>
        </div>

        <h1>3. CompChem Concepts and Elements</h1>

        <h2 id="jobList">3.1 Joblist</h2>
        <p>
            A quantum chemistry calculation is often comprised of a series of subtasks, 
            <i>e.g.</i> coarse optimisation -> fine optimisation -> NMR Spectrum Analysis; this is 
            because most quantum chemistry software packages are designed to be modularised and only 
            to perform a single task at a time. The job list concept is introduced to capture these 
            series of successive subtasks and links the information from one subtask to the next subtask.
            </p>

        <p>
            A job list concept in CompChem is represented by a <code>module</code> element with
            a <code>dictRef="compchem:jobList"</code>. Such a module will be addressed as a job list
            module or a job list module element in this convention.
        </p>
        
        <p>A job list module are constructed according to the following rules:</p>

        <ul>
        <li>
            A job list module MUST be defined by a <code>dictRef="compchem:jobList"</code>
            attribute on a <code>module</code> element, i.e.
            <code>&lt;module dictRef="compchem:jobList"&gt;</code>. This is shown in 
            <a href="#example3">Example 3</a>.
        </li>

        <li>
            A job list module element MUST have an <code>id</code> attribute specified.
        </li>
        
        <li>
            A job list module element MUST contain at <strong><em>least one</em></strong>
            child of a <a href="#job">job module</a> element. (See <a href="#example3">Example 3</a>.)
        </li>

        <li>
            A job list module element SHOULD have a <code>title</code> attribute specifying
            a human-readable name for the module. 
        </li>
        </ul>

        <p id="example3">
            <strong>Example 3: Minimal requirements for CompChem Joblist</strong>
        </p>
        <div class="good">
<pre>
&lt;module dictRef="compchem:jobList" id="jobList-0000" &gt;
    &lt;module dictRef="compchem:job"&gt;
        &lt;!-- job body is omitted. --&gt;
    &lt;/module&gt;
&lt;/module&gt;
</pre>
        </div>

        <h2>3.2 Job</h2>
        <p>
            A job concept represents a computational job performed by quantum chemistry
            software, <i>e.g.</i> geometry optimisation job, frequency analysis job.
            The job concept is the smallest unit which can fully describe a general
            picture of computational modelling. 
        </p>

        <p>
            A job consists of model parameters (<a href="#initialization">3.3</a>), model
            optimisations or calculations (<a href="#calculation">3.4</a>), model results
            (<a href="#finalization">3.5</a>) and computing environments
            (<a href="#environment">3.6</a>). These four components are fundamental to
            modelling in every field. However, a job does not require all four components.
            Only model parameters are mandatory.
        </p>
        
        <p>
            A job concept in CompChem is represented by a <code>module</code> element with
            a <code>dictRef="compchem:job"</code>. Such a module will be addressed as a job
            module or a job module element in this convention.
        </p>

        <p>A job module are constructed according to the following rules:</p>

        <ul>
        <li>
            A job module MUST be defined by a <code>dictRef="compchem:job"</code> attribute on
            a <code>module</code> element, i.e.
            <code>&lt;module dictRef="compchem:job"&gt;</code>. This is shown in 
            <a href="#example4">Example 4</a>.
        </li>

        <li>
            A job module element MUST have an <code>id</code> attribute specified.
        </li>

        <li>
            A job module element SHOULD have a <code>title</code> attribute specifying a
            human-readable name for the module. 
        </li>

        <li>
            A job module element MUST contains <strong> <em>exactly one</em></strong>
            <a href="#initialization">initialization module</a>.
        </li>

        <li>
            A job module element MAY contain at <strong><em>least one</em></strong> child of a
            <a href="#calculation">calculation module</a> element <strong><em>after</em></strong>
            the <a href="#initialization">initialization module</a> element (<a href="#example5">Example 5</a>).
        </li>

        <li>
            If a job module element contains a <a href="#calculation">calculation modules</a>,
            it MUST also contain a child of <a href="#finalization">finalization module</a> element
            but it is not the other way round.
        </li>

        <li>
            A job module element MAY contain <strong><em>exactly one</em></strong> child of a
            <a href="#finalization">finalization module</a> element <strong><em>after</em></strong>
            the <a href="#calculation">calculation module</a> elements
            (if present) <strong><em>or</em></strong> <strong><em>after</em></strong> the 
            <a href="#initialization">initialization module</a> element 
            (if <a href="#calculation">calculation module</a> elements are not present, 
            shown in <a href="#example6">Example 6</a>).
        </li>

        <li>
            A <a href="#finalization">finalization module</a> element MUST be the <strong><em>last</em></strong>
            child element of a job module element if it is present.
        </li>

        </ul>

        <p>
            The only requirement for a job module is that it MUST have an <a href="#initialization">initialization module</a>
            , see <a href="#example4">Example 4</a>. Such a module represents a model input for a
            computational job.
        </p>

        <p id="example4">
            <strong>Example 4: Minimal requirements for a job module</strong>
        </p>

        <div class="good">
            <pre>
&lt;module dictRef="compchem:job" id="job-0000" title="input for coarse geometry optimisation"&gt;
    &lt;module dictRef="compchem:initialization"&gt;
        &lt;!-- requried init body is omitted. --&gt;
    &lt;/module&gt;
&lt;/module&gt;
            </pre>
        </div>

        <p id="example5">
            <strong>Example 5: A job module with multiple calculation steps</strong>
        </p>
        <div class="good">
            <pre>
&lt;module dictRef="compchem:job" id="job-0000" title="coarse geometry optimisation"&gt;
    &lt;module dictRef="compchem:initialization"&gt;
        &lt;!-- requried init body is omitted. --&gt;
    &lt;/module&gt;
    &lt;module dictRef="compchem:calculation"&gt;
        &lt;!-- requried calculation body is omitted. --&gt;
    &lt;/module&gt;
    &lt;module dictRef="compchem:calculation"&gt;
        &lt;!-- requried calculation body is omitted. --&gt;
    &lt;/module&gt;
    &lt;module dictRef="compchem:calculation"&gt;
        &lt;!-- requried calculation body is omitted. --&gt;
    &lt;/module&gt;
    &lt;module dictRef="compchem:finalization"&gt;
        &lt;!-- requried final body is omitted. --&gt;
    &lt;/module&gt;
&lt;/module&gt;
            </pre>
        </div>

        <p id="example6">
            <strong>Example 6: A job module without calculation steps</strong>
        </p>

        <div class="good">
            <pre>
&lt;module dictRef="compchem:job" id="job-0000" title="coarse geometry optimisation"&gt;
    &lt;module dictRef="compchem:initialization"&gt;
        &lt;!-- requried init body is omitted. --&gt;
    &lt;/module&gt;
    &lt;module dictRef="compchem:finalization"&gt;
        &lt;!-- requried final body is omitted. --&gt;
    &lt;/module&gt;
&lt;/module&gt;
            </pre>
        </div>

        <h2 id="initialization">3.3 Model Initialization</h2>

        <p>
            A model initialization concept represents the model parameters and inputs
            for computational job. The model parameters are one of the most important
            elements and exist in every modelling study. Therefore, this concept is a
            REQUIRED element in the CompChem convention.
        </p>

        <p>
            A model initialization concept in CompChem is represented by a <code>module</code>
            element with a <code>dictRef="compchem:initialization"</code>. Such a module will
            be addressed as an initialization module or an initialization module element in
            this convention.
        </p>

        <p>
            An initialization module are constructed according to the following rules:
        </p>

        <ul>
            <li>
                An initialization module MUST be defined by a <code>dictRef="compchem:initialization"</code>
                attribute on a <code>module</code> element, i.e. 
                <code>&lt;module dictRef="compchem:initialization"&gt;</code>
                (<a href="#example7">Example 7</a>).
            </li>

            <li>
                An initialization module element MUST contains at <strong><em>least one</em></strong>
                child of <code>molecule</code>, <code>parameterList</code> or <a href="#userDefinedConcept">user defined module</a> element.
            </li>

            <li>
                An initialization module element MUST NOT conatin any other elements except <code>molecule</code>,
                <code>parameterList</code> or <a href="#userDefinedConcept">user defined module</a> element.
            </li>

            <li>
                An initialization module element MAY contains <strong><em>exactly one</em></strong>
                <code>molecule</code> element in <a href="http://www.xml-cml.org/convention/molecular">molecular convention</a>
                or other RECOMMENDED molecular conventions <em class="bad">Make link to recomended conventions in the page</em>,
                <em>e.g.</em> molecular convention MUST be specified for <code>molecule</code> element.
            </li>

            <li>
                An initialization module element MAY contains <strong><em>exactly one</em></strong>
                <code>parameterList</code> element.
            </li>

            <li>
                An initialization module element MAY contains <strong><em>any number</em></strong> of
                <a href="#userDefinedConcept">user defnied module</a> element.
            </li>
        </ul>

        <p id="example7">
            <strong>Example 7: An initialization module</strong>
        </p>
        <div class="good">
            <pre>
&lt;module dictRef="compchem:initialization"&gt;
    &lt;molecule convention="convention:molecular"&gt;
        &lt;!-- consult molecular convention or recommended molecular convention. --&gt;
    &lt;/molecule&gt;
    &lt;parameterList&gt;
        &lt;!-- parameterList body is omitted. --&gt;
    &lt;/parameterList&gt;
&lt;/module&gt;
            </pre>
        </div>

        <h2 id="calculation">3.4 Model Calculation</h2>

        <p>
            A model calculation concept represents the computation, the optimisation or the iteration 
            processes for computational job. The calculation process may or may not be of interest by
            many scientists, therfore, the model calculation is an OPTIONAL information in CompChem.
        </p>

        <p>
            A model calculation concept in CompChem is represented by a <code>module</code>
            element with a <code>dictRef="compchem:calculation"</code>. Such a module will
            be addressed as an calculation module or an calculation module element in
            this convention.
        </p>

        <p>
            A calculation module are constructed according to the following rules:
        </p>

        <ul>
            <li>
                An calculation module MUST be defined by a <code>dictRef="compchem:calculation"</code>
                attribute on a <code>module</code> element, i.e. 
                <code>&lt;module dictRef="compchem:calculation"&gt;</code>
                (<a href="#example8">Example 8</a>).
            </li>

            <li>
                An calculation module MAY contains <strong><em>exactly one</em></strong>
                <code>molecule</code> element in molecular convention, i.e. molecular convention MUST be specified in <code>molecule</code> element.</li>
            <li>The CompChem Calculation MAY contains <strong>
                    <em>exactly one</em>
                </strong>
                <code>cml:parameterList</code> element.</li>
            <li>The CompChem Calculation MAY contains <strong>
                    <em>exactly one</em>
                </strong>
                <code>cml:propertyList</code> element.</li>
            <li>The CompChem Calculation MUST contains at <strong>
                    <em>least one</em>
                </strong> of <code>cml:molecule</code>, <code>cml:parameterList</code>, <code>cml:propertyList</code> or user defined <code>module</code> element.</li>
            <li>There MAY be <strong>
                    <em>zero or more than one</em>
                </strong> of CompChem Calculation in a given CompChem Job.</li>
            <li>There MUST NOT be any other elements than given above in CompChem Calculation.</li>
        </ul>

<p id="example8">
    <strong>Example 8: CompChem Calculation module</strong>
</p>
<div class="good">
    <pre>
        &lt;module role="calculation"&gt;
        &lt;molecule convention="convention:molecular"&gt;
        &lt;!-- consult molecular convention and molecule section below. --&gt;
        &lt;/molecule&gt;
        &lt;parameterList&gt;
        &lt;!-- parameterList body is omitted. --&gt;
        &lt;/parameterList&gt;
        &lt;propertyList&gt;
        &lt;!-- propertyList body is omitted. --&gt;
        &lt;/propertyList&gt;
        &lt;/module&gt;
    </pre>
</div>
<h2 id="finalization">3.5 Model Finalization</h2>

<p>
    A finalization module represents the concept of the model results for computational job. The finalization module is optional in CompChem. Here is a list of requirements:
</p>

<ul>
    <li>The CompChem Final is defined by a <code>cml:module</code> which value of <code>role</code> attribute MUST be set to <code>final</code>.</li>
    <li>The CompChem Final MAY contains <strong>
            <em>exactly one</em>
        </strong>
        <code>cml:molecule</code> element in molecular convention, i.e. molecular convention MUST be specified in <code>molecule</code> element.</li>
    <li>The CompChem Final MAY contains <strong>
            <em>exactly one</em>
        </strong>
        <code>cml:propertyList</code> element.</li>
    <li>The CompChem Final MUST contains at <strong>
            <em>least one</em>
        </strong> of <code>cml:molecule</code>, <code>cml:propertyList</code> or user defined <code>module</code> element.</li>
    <li>There MUST be <strong>
            <em>exactly one</em>
        </strong> of CompChem Final in a given CompChem Job.</li>
    <li>There MUST NOT be any other elements than given above in CompChem Final.</li>
</ul>

<p id="example9">
    <strong>Example 8: CompChem Final module</strong>
</p>
<div class="good">
    <pre>
        &lt;module role="final"&gt;
        &lt;molecule convention="convention:molecular"&gt;
        &lt;!-- consult molecular convention and molecule section below. --&gt;
        &lt;/molecule&gt;
        &lt;propertyList&gt;
        &lt;!-- propertyList body is omitted. --&gt;
        &lt;/propertyList&gt;
        &lt;/module&gt;
    </pre>
</div>

<h2>3.6 User Defined Module</h2>
CompChem allows user the add their own data structure. This is done by using <code>module[@dictRef="userDefinedDictionaryEntry"]</code>. This module will not be validated by CompChem validator.<em class="bad">Not finished</em>

        <p id="exampleX">
            <strong>Example X: CompChem User Defined module</strong>
        </p>
        <div class="good">
            <pre>
&lt;module dictRef="prefix:def"&gt;
    &lt;molecule convention="convention:molecular"&gt;
        &lt;!-- consult molecular convention and molecule section below. --&gt;
    &lt;/molecule&gt;
    &lt;propertyList&gt;
        &lt;!-- propertyList body is omitted. --&gt;
    &lt;/propertyList&gt;
&lt;/module&gt;
            </pre>
        </div>

        <h1>4. Data Structure with CML Elements</h1>
        <p>
            CompChem has adopted a set of elements from CML to store the contents of the computational data. This section describes how CompChem constructs the data structure from these CML elements set.
        </p>
<h1>4. Data Structure with CML Elements</h1>
<p>
    CompChem has adopted a set of elements from CML to store the contents of the computational data. This section describes how CompChem constructs the data structure from these CML elements set.
</p>

<h2>4.1 Molecule</h2>

<p>CompChem uses CML Molecule to store molecular geometry and coordinates. CML Molecule specifications are defined in molecular convention so the convention of the <code>molecule</code> element MUST be specified using the <code>convention</code> attribute with the value of <code>convention:molecular</code>. Readers SHOULD consult the specifications of molecular convention for more details.</p>

<h2>4.2 z-Matrix</h2>

<p>In many quantum chemistry calculations, the coordinates of the atoms are represented using z-Matrix coordinate system. CompChem adopted z-Matrix from CML schema. <em class="bad">(I have never used z-Matrix so I have very little experience. However, this is an important element and must be part of the CompChem)</em>
</p>


<h2>4.3 ParameterList</h2>

<p>CompChem uses CML ParameterList to group the CML Parameter(s) together. CML ParameterList MUST have only the CML Parameter(s) as child(s).</p>

<h2>4.4 PropertyList</h2>

<p>CompChem uses CML PropertyList to group the CML Property(s)  together. CML PropertyList MUST have only the CML Property(s) as child(s).</p>

<h2>4.5 Parameter</h2>

<p>CompChem uses CML Parameter to represent the concept of the inputs of the quantum chemistry calculations.</p>

<p>A CML Parameter is defined by <code>cml:parameter</code> element and MUST have a referrence to an entry in a dictionary which specifies the meaning of the parameter.</p>

<p>A <code>parameter</code> MUST contain only <strong>
        <em>one of</em>
    </strong> the value containers given in section 4.8.</p>

<h2>4.6 Property</h2>

<p>CompChem uses CML Property to represent the concept of the outputs of the quantum chemistry calculations.</p>

<p>A CML Property is defined by <code>cml:property</code> element and MUST have a referrence to an entry in a dictionary which specifies the meaning of the property.</p>

<p>A <code>property</code> MUST contain only <strong>
        <em>one of</em>
    </strong> the value containers given in section 4.8.</p>

<h2>4.7 Units</h2>

<p>Units are one of the most important information in scientific data. All value containers, see section 4.8, MUST have units associated with them <strong>
        <em>except</em>
    </strong> that they are string or text values.</p>

<ul>
    <li>The unit on a value container MUST be specified using <code>unit</code> attribute and the value MUST be <code>QName</code> of an entry in a unit dictionary. The unit dictionary MUST be provided along with the CompChem document if the unit entry used in the CompChem document does not exist on xml-cml.org.</li>
    <li>
        <em class="bad">TODO: Define units for dimensionles quantity.</em>
    </li>
</ul>

<h2>4.8 Value container</h2>
<p>CML provides elements to wrap many differrent types of mathematical, scientifical and computational values and variables, e.g. scalar, vector, matrix, array, etc., which will be addressed as value container in the current context. In CompChem, we current <strong>
        <em>only</em>
    </strong> allow the use of <code>scalar</code>, <code>array</code> and <code>matrix</code> as value containers. This should be sufficiently enough for many computational outputs. Other type of CML containers will be added later.</p>


<h3>4.8.1 Scalar</h3>

<p>
    A CML Scalar element in CompChem is used to hold a scalar data, which can be a single value of integer or real. The CML Scalar is also extended to include string or text value.
</p>

<p>
    In CompChem, the CML Scalar MUST conform with the following rules :
</p>

<ul>
    <li>CML Scalar is defined by a <code>cml:scalar</code> element and MUST conform with CML schema version 3.</li>
    <li>The data type of <code>scalar</code> is REQUIRED and MUST be specified using a <code>dataType</code> attribute. The value of <code>dataType</code> attribute MUST be <strong>
            <em>one of</em>
        </strong>
        <code>xsd:string</code>, <code>xsd:integer</code> or <code>xsd:double</code>. <em class="bad">TODO: Decide whether to include other types, e.g. <code>xsd:date, xsd:real, xsd:float</code>.</em>
    </li>
    <li>
        <code>scalar</code> MUST have unit if the <code>dataType</code> is either <code>xsd:integer</code> or <code>xsd:double</code> even if they are dimensionless.</li>
    <li>
        <code>scalar</code> MUST NOT have unit and unit type if the <code>dataType</code> is <code>xsd:string</code>.</li>
</ul>

<h3>4.8.2 Array</h3>

<p>
    A CML Array element in CompChem is used to hold a one dimentioanl array data structure of <strong>
        <em>only either</em>
    </strong> integer or real values, i.e. a collection of integer of real values where each element is identified by index. Thus, the data type of the CML Array MUST <strong>
        <em>only</em>
    </strong> be <code>xsd:integer</code> or <code>xsd:double</code>. It MUST also conform with the following rules :
</p>

<ul>
    <li>CML Array is defined by a <code>cml:array</code> element and MUST conform with CML schema version 3.</li>
    <li>The size of <code>array</code> is requried and MUST be specified using <code>size</code> attribute with the minimum value of 1.</li>
    <li>
        <em class="bad">TODO: delimiter, not sure what should be put here, the schema does not allow white space for dilimeter but cmlxom does.</em>
    </li>
    <li>The data type of <code>array</code> is REQUIRED and MUST be specified using <code>dataType</code> attribute. The value of <code>dataType</code> attribute MUST be <strong>
            <em>one of</em>
        </strong>
        <code>xsd:integer</code> or <code>xsd:double</code>. <em class="bad">TODO: Decide whether to include other types, e.g. <code>xsd:real, xsd:float</code>.</em>
    </li>
    <li>
        <code>array</code> MUST have unit even if they are dimensionless.</li>
</ul>

<h3>4.8.3 Matrix</h3>

<p>
    A CML Matrix element in CompChem is used to hold a two-dimensional rectangular matrix data structure of <strong>
        <em>only either</em>
    </strong> integer or real values. Thus, the data type of this value container MUST <strong>
        <em>only</em>
    </strong> be <code>xsd:integer</code> or <code>xsd:double</code>. It MUST also conform with the following rules :
</p>

<ul>
    <li>CML Matrix is defined by a <code>cml:matrix</code> element and MUST conform with CML schema version 3.</li>
    <li>The dimension of <code>matrix</code> is requried and MUST be specified using <code>rows</code> and <code>columns</code> attributes with the minimum values of 1. <em class="bad">(In CML Schema, this value is <code>xsd:nonNegativeInteger</code> which includes zero. Maybe this should be changed to <code>xsd:positiveInteger</code>)</em>
    </li>
    <li>
        <em class="bad">TODO: delimiter, not sure what should be put here, the schema does not allow white space for dilimeter but cmlxom does.</em>
    </li>
    <li>The data type of <code>matrix</code> is REQUIRED and MUST be specified using <code>dataType</code> attribute. The value of <code>dataType</code> attribute MUST be <strong>
            <em>one of</em>
        </strong>
        <code>xsd:integer</code> or <code>xsd:double</code>. <em class="bad">TODO: Decide whether to include other types, e.g. <code>xsd:real, xsd:float</code>.</em>
    </li>
    <li>
        <code>matrix</code> MUST have unit even if they are dimensionless.</li>
</ul>

<p id="example10">
    <strong>Example : Fully qualified CompChem document (Isn't qualified at the moment due to change in the rules)</strong>
</p>

<div class="good">
    <pre>
        &lt;?xml version="1.0" encoding="UTF-8"?&gt;
        &lt;cml 
        cmlx:note="A valid compchem containg two jobs is valid."
        convention="conventions:compchem"
        xmlns="http://www.xml-cml.org/schema"
        xmlns:conventions="http://www.xml-cml.org/convention/"
        xmlns:units="http://www.xml-cml.org/units/units"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:cmlx="http://www.xml-cml.org/schema/cmlx"&gt;
        &lt;module role="joblist"&gt;
        &lt;identifier convention="chemid:EmpiricalFormula" value="CCl2O2"/&gt;
        &lt;identifier convention="chemid:InChI" value="InChI=1/CCl2O2/c2-1(4)5-3"/&gt;
        &lt;identifier convention="chemid:CanonicalSmiles" value="ClOC(=O)Cl"/&gt;
        &lt;identifier convention="chemid:IsomericSmiles" value="C(=O)(Cl)OCl"/&gt;
        &lt;module role="job" title="job1"&gt;
        &lt;module role="init"&gt;
        &lt;parameterList&gt;
        &lt;parameter dictRef="cmlqm:qm.method"&gt;
        &lt;scalar dataType="xsd:string"&gt;B97-1&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:qm.basis"&gt;
        &lt;scalar dataType="xsd:string"&gt;6-311+G(d,p)&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:qm.integral"&gt;
        &lt;scalar dataType="xsd:string"&gt;UltraFine&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:qm.symm"&gt;
        &lt;scalar dataType="xsd:string"&gt;None&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:qm.pop"&gt;
        &lt;scalar dataType="xsd:string"&gt;Regular&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:cmd.freq"&gt;
        &lt;scalar dataType="xsd:string"&gt;Frequency analysis&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:cmd.geo"&gt;
        &lt;scalar dataType="xsd:string"&gt;Geometry optimization&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;parameter dictRef="cmlqm:cmd.scf"&gt;
        &lt;scalar dataType="xsd:string"&gt;Tight, SCF Convergence Criteria of 10^-8&lt;/scalar&gt;
        &lt;/parameter&gt;
        &lt;/parameterList&gt;
        &lt;molecule formalCharge="0" spinMultiplicity="1"&gt;
        &lt;atomArray&gt;
        &lt;atom id="a1" elementType="C" x3="-1.6629" y3="-1.148" z3="-0.0578"/&gt;
        &lt;atom id="a2" elementType="Cl" x3="-3.0407" y3="-0.0568" z3="-0.2355"/&gt;
        &lt;atom id="a3" elementType="O" x3="-0.5528" y3="-0.8196" z3="0.1622"/&gt;
        &lt;atom id="a4" elementType="O" x3="-2.1799" y3="-2.3872" z3="-0.2293"/&gt;
        &lt;atom id="a5" elementType="Cl" x3="-1.0066" y3="-3.6732" z3="-0.1014"/&gt;
        &lt;/atomArray&gt;
        &lt;bondArray&gt;
        &lt;bond atomRefs2="a1 a2" order="S" id="a1_a2"/&gt;
        &lt;bond atomRefs2="a1 a3" order="D" id="a1_a3"/&gt;
        &lt;bond atomRefs2="a1 a4" order="S" id="a1_a4"/&gt;
        &lt;bond atomRefs2="a4 a5" order="S" id="a4_a5"/&gt;
        &lt;/bondArray&gt;
        &lt;/molecule&gt;
        &lt;/module&gt;
        &lt;module role="final"&gt;
        &lt;molecule formalCharge="0" spinMultiplicity="1"&gt;
        &lt;atomArray&gt;
        &lt;atom id="a1" elementType="C" x3="-1.661722" y3="-1.150648" z3="-0.057744"/&gt;
        &lt;atom id="a2" elementType="Cl" x3="-3.041068" y3="-0.059007" z3="-0.235698"/&gt;
        &lt;atom id="a3" elementType="O" x3="-0.55104" y3="-0.821319" z3="0.162394"/&gt;
        &lt;atom id="a4" elementType="O" x3="-2.180501" y3="-2.387568" z3="-0.229457"/&gt;
        &lt;atom id="a5" elementType="Cl" x3="-1.00857" y3="-3.666258" z3="-0.101295"/&gt;
        &lt;/atomArray&gt;
        &lt;bondArray&gt;
        &lt;bond atomRefs2="a1 a2" order="S" id="a1_a2"/&gt;
        &lt;bond atomRefs2="a1 a3" order="D" id="a1_a3"/&gt;
        &lt;bond atomRefs2="a1 a4" order="S" id="a1_a4"/&gt;
        &lt;bond atomRefs2="a4 a5" order="S" id="a4_a5"/&gt;
        &lt;/bondArray&gt;
        &lt;/molecule&gt;
        &lt;propertyList&gt;
        &lt;property dictRef="cmlqm:property.nsymrot"&gt;
        &lt;scalar dataType="xsd:integer"&gt;1&lt;/scalar&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.rotconstants"&gt;
        &lt;array dataType="xsd:double" units="units:GHz" delimiter="" size="3"&gt;
        9.610774107948902 1.6540686120943338 1.4111941740951228
        &lt;/array&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.pmoi"&gt;
        &lt;array dataType="xsd:double" units="units:amu.rbohr2" delimiter="" size="3"&gt;
        187.7832739452039 1091.092965516907 1278.876188881425
        &lt;/array&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.pmoiaxis"&gt;
        &lt;matrix rows="3" columns="3" dataType="xsd:double"&gt;
        0.4547378900162555 0.8730253212283468 -0.17618240513089256
        -0.8902808990268888 0.45108016953679547 -0.06266260031733822
        0.02476635240479569 0.18534688868388882 0.9823610123797482
        &lt;/matrix&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.scfenergy"&gt;
        &lt;scalar dataType="xsd:double" units="units:hartree"&gt;-1108.82623721&lt;/scalar&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.hf298"&gt;
        &lt;scalar units="units:kcal.mol-1" dataType="xsd:double"&gt;-61.5885860322&lt;/scalar&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.freqmode"&gt;
        &lt;array dataType="xsd:double" units="units:cm-1" delimiter="" size="9"&gt;
        142.6122 218.2282 326.208 471.9528 665.9777 708.8044 841.3894 1047.4277 1905.0634
        &lt;/array&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.forceconstant"&gt;
        &lt;array dataType="xsd:double" units="units:mDyne.A-1" delimiter="" size="9"&gt;
        0.2216 0.5379 1.7308 2.7391 3.3245 5.34 6.1336 8.6831 28.3818
        &lt;/array&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.irintensity"&gt;
        &lt;array dataType="xsd:double" units="units:KM.mol-1" delimiter="" size="9"&gt;
        0.4756 1.7945 5.3957 3.2514 12.5217 26.7365 85.8421 376.7849 400.4058
        &lt;/array&gt;
        &lt;/property&gt;
        &lt;property dictRef="cmlqm:property.reducedmass"&gt;
        &lt;array dataType="xsd:double" units="units:amu" delimiter="" size="9"&gt;
        18.4952 19.1715 27.6069 20.8721 12.7222 18.04 14.7051 13.4331 13.273
        &lt;/array&gt;
        &lt;/property&gt;
        &lt;/propertyList&gt;
        &lt;/module&gt;
        &lt;/module&gt;
        &lt;/module&gt;
        &lt;/cml&gt;
    </pre>
</div>
<!--h2>4.x Connection tables</h2>
        
        <h3>4.1 Atom Elements</h3>
        
        <p>
            A <code>molecule</code> MAY contain a single <code>atomArray</code> child.
            An <code>atomArray</code> MUST be a child of a <code>molecule</code>.
            An <code>atomArray</code> MUST contain at least one <code>atom</code>.
            <code>atom</code> elements MUST be children of an <code>atomArray</code>.
        </p>
        
        <h4>4.1.x ID</h4>
        
        <p>
            Unless it is part of a <code>formula</code>, an <code>atom</code> MUST have an <code>id</code> attribute, which
            MUST be unique within the scope of the eldest containing <code>molecule</code>.
        </p>
        
        <h4>4.2.x Element Type</h4>
        
        <p>
            An <code>atom</code> MUST have an <code>elementType</code> attribute.
        </p>
        
        <h4>4.3.x 2D Coordinates</h4>
        
        <p>
            An <code>atom</code> MAY have <code>x2</code> and <code>y2</code> attributes.
            If an <code>atom</code> has either an <code>x2</code> or a <code>y2</code> attribute then
            it MUST have both an <code>x2</code> and a <code>y2</code> attribute.
        </p>
        
        <h4>4.4.x 3D Coordinates</h4>
        
        <p>
            An <code>atom</code> MAY have <code>x3</code>, <code>y3</code> and <code>z3</code> attributes.
            If an <code>atom</code> has any of <code>x3</code>, <code>y3</code> or <code>z3</code> attributes then
            it MUST have both all <code>x3</code>, <code>y3</code> and <code>z3</code> attribute.
        </p>
        
        <h4>4.5.x Atom Parity Elements</h4>
        
        
        <h3>4.2 Bond Elements</h3>
        
        <p>
            A <code>molecule</code> MAY contain a single <code>bondArray</code> child.
            A <code>bondArray</code> MUST be a child of a <code>molecule</code>.
            A <code>bondArray</code> MUST contain at least one <code>bond</code>.
        </p>
        
        <h4>4.2.1 ID</h4>
        
        <p>
            A <code>bond</code> SHOULD have an <code>id</code> attribute, the value of which MUST be unique within the scope
            of the eldest containing molecule.
        </p>
        
        
        <h4>4.2.2 AtomRefs</h4>
        
        <p>
            A <code>bond</code> MUST have a <code>atomRefs2</code> attribute.
            The atoms in the <code>atomRefs2</code> attribute MUST be within the socpe of the eldest containing molecule.
            A <code>bond</code> MUST be between two different atoms.
        </p>
        
        
        <h4>4.2.3 Order</h4>
        
        <p>
            A <code>bond</code> MUST have an <code>order</code> attribute.
            If the value of the <code>order</code> attribute is <code>other</code>, then the <code>bond</code> SHOULD
            have further semantics given using the <code>dictRef</code> attribute.
        </p-->





<h1>
    <a name="refs">A.</a> References</h1>

<dl>

    <dt>
        <a name="ref-RFC2119">[RFC2119]</a>
    </dt>
    <dd>
        IETF <cite>
            <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119: Key words for use in RFCs to Indicate Requirement Levels</a>
        </cite>,
        S. Bradner, March 1997. Available at http://www.ietf.org/rfc/rfc2119.txt.
    </dd>

    <dt>
        <a name="ref-XML">[XML]</a>
    </dt>
    <dd>
        <cite>
            <a href="http://www.w3.org/TR/2008/REC-xml-20081126">Extensible Markup Language (XML) 1.0 (Fifth Edition)</a>
        </cite>,
        T. Bray, J. Paoli, C.M. Sperberg-McQueen E. Maler and F. Yergeau, Editors.  World Wide Web Consortium.
        26 October 2008. This version is http://www.w3.org/TR/2008/REC-xml-20081126. <a href="http://www.w3.org/TR/REC-xml">latest version of XML</a> is available at http://www.w3.org/TR/REC-xml.
    </dd>

</dl>


<h1>
    <a name="acks">B.</a> Acknowledgements</h1>

<ul>
    <li>Peter Murray-Rust</li>
    <li>Joe Townsend</li>
    <li>Sam Adams</li>
</ul>

<hr />

<p>
    <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">
        <img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" />
    </a>
    <br/>
    This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
</p>

</body>
</html>
